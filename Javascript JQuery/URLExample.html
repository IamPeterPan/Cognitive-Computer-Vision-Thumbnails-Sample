<html>

<head>
    <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.5/css/bootstrap.min.css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
</head>

<body>
    <div class="container body-content">
        <div class="row">
            <div class="col-md-12">
                <p>This example shows how to post an image to the Cognitive Services Computer Vision API (thumbnails) using a url to a fiile</p>
                <button id="btn">Click here</button>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p id="response"></div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        //apiKey: Replace this with your own Cognitive Services Computer Vision API key, please do not use my key. I include it here so you can get up and running quickly but you can get your own key for free at https://www.microsoft.com/cognitive-services/en-us/computer-vision-api
        var apiKey = "382f5abd65f74494935027f65a41a4bc";
        
        //apiUrl: The base URL for the API. Find out what this is for other APIs via the API documentation
        var apiUrl = "https://api.projectoxford.ai/vision/v1.0/generateThumbnail";
        
        $('#btn').click(function () {
            CallAPI("https://oxfordportal.blob.core.windows.net/emotion/recognition1.jpg", apiUrl, apiKey);
        });
        
        function CallAPI(fileUrl, apiUrl, apiKey)
        {
            var uri = apiUrl +"?width=100&height=100&smartCropping=true";
            
            $.ajax({
                url: uri,
                beforeSend: function (xhrObj) {                    
                    xhrObj.setRequestHeader("Content-Type", "application/json");
                    xhrObj.setRequestHeader("Ocp-Apim-Subscription-Key", apiKey);
                },
                type: "POST",
                data: '{"url": "' +fileUrl +'"}'
            })
                .done(function (response) {
                    ProcessResult(response);
                })
                .fail(function (error) {
                    $("#response").text(error.responseText);
                });
        }
        
        function ProcessResult(response)
        {
            var results = jQuery.parseJSON(response);
            
            
            $("#response").text("test");
        }
    </script>
</body>

</html>